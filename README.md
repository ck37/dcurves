
<!-- README.md is generated from README.Rmd. Please edit that file -->
[![Travis build status](https://travis-ci.org/ddsjoberg/dca.svg?branch=master)](https://travis-ci.org/ddsjoberg/dca) [![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/ddsjoberg/dca?branch=master&svg=true)](https://ci.appveyor.com/project/ddsjoberg/dca) [![Coverage status](https://codecov.io/gh/ddsjoberg/dca/branch/master/graph/badge.svg)](https://codecov.io/github/ddsjoberg/dca?branch=master) <!-- [![CRAN status](https://www.r-pkg.org/badges/version/dca)](https://cran.r-project.org/package=dca) -->

dca
===

Diagnostic and prognostic models are typically evaluated with measures of accuracy that do not address clinical consequences. Decision-analytic techniques allow assessment of clinical outcomes but often require collection of additional information and may be cumbersome to apply to models that yield a continuous result. Decision curve analysis is a method for evaluating and comparing prediction models that incorporates clinical consequences, requires only the data set on which the models are tested, and can be applied to models that have either continuous or dichotomous results.

Installation
------------

You can install dca from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("ddsjoberg/dca")
```

Example
-------

This is a basic example which shows you how to solve a common problem:

``` r
library(MASS)
library(dca)
data.set <- birthwt
model = glm(low ~ age + lwt, family=binomial(link="logit"), data=data.set)
data.set$predlow = predict(model, type="response")
dca(data=data.set, outcome="low", predictors=c("age", "lwt"), probability=c("FALSE", "FALSE"))
#> [1] "age converted to a probability with logistic regression. Due to linearity assumption, miscalibration may occur."
#> [1] "lwt converted to a probability with logistic regression. Due to linearity assumption, miscalibration may occur."
```

<img src="man/figures/README-example-1.png" width="100%" />

    #> $N
    #> [1] 189
    #> 
    #> $predictors
    #>   predictor harm.applied probability
    #> 1       age            0       FALSE
    #> 2       lwt            0       FALSE
    #> 
    #> $interventions.avoided.per
    #> [1] 100
    #> 
    #> $net.benefit
    #>    threshold           all none           age         lwt
    #> 1       0.01   0.305221527    0  0.3052215274 0.305221527
    #> 2       0.02   0.298131951    0  0.2981319512 0.298131951
    #> 3       0.03   0.290896198    0  0.2908961981 0.290896198
    #> 4       0.04   0.283509700    0  0.2835097002 0.283509700
    #> 5       0.05   0.275967697    0  0.2759676970 0.275967697
    #> 6       0.06   0.268265226    0  0.2682652257 0.268265226
    #> 7       0.07   0.260397110    0  0.2603971099 0.260397110
    #> 8       0.08   0.252357948    0  0.2523579480 0.252818035
    #> 9       0.09   0.244142101    0  0.2441421013 0.245188674
    #> 10      0.10   0.235743680    0  0.2357436802 0.238095238
    #> 11      0.11   0.227156531    0  0.2271565305 0.229772308
    #> 12      0.12   0.218374218    0  0.2183742184 0.221981722
    #> 13      0.13   0.209390014    0  0.2101806240 0.213343064
    #> 14      0.14   0.200196875    0  0.2010582011 0.205364833
    #> 15      0.15   0.190787426    0  0.1917211329 0.191098662
    #> 16      0.16   0.181153943    0  0.1821617536 0.178634417
    #> 17      0.17   0.171288328    0  0.1723720278 0.162045005
    #> 18      0.18   0.161182088    0  0.1623435282 0.153955349
    #> 19      0.19   0.150826311    0  0.1545496113 0.145796590
    #> 20      0.20   0.140211640    0  0.1468253968 0.141534392
    #> 21      0.21   0.129328243    0  0.1310695868 0.137700087
    #> 22      0.22   0.118165785    0  0.1248134581 0.123049790
    #> 23      0.23   0.106713392    0  0.1166769738 0.119769120
    #> 24      0.24   0.094959621    0  0.1074909496 0.104706210
    #> 25      0.25   0.082892416    0  0.1075837743 0.091710758
    #> 26      0.26   0.070499070    0  0.1003861004 0.080795081
    #> 27      0.27   0.057766181    0  0.0825541784 0.060810321
    #> 28      0.28   0.044679600    0  0.0602586714 0.059376837
    #> 29      0.29   0.031224383    0  0.0510470229 0.057530367
    #> 30      0.30   0.017384732    0  0.0302343159 0.058956916
    #> 31      0.31   0.003143931    0  0.0140326662 0.029368913
    #> 32      0.32  -0.011515717    0 -0.0006224712 0.023653906
    #> 33      0.33  -0.026612967    0  0.0100292190 0.026218116
    #> 34      0.34  -0.042167709    0 -0.0036876704 0.036235370
    #> 35      0.35  -0.058201058    0 -0.0231990232 0.037037037
    #> 36      0.36  -0.074735450    0 -0.0049603175 0.048941799
    #> 37      0.37  -0.091794743    0  0.0062988158 0.043671790
    #> 38      0.38  -0.109404335    0  0.0042669398 0.050691244
    #> 39      0.39  -0.127591292    0 -0.0006071645 0.030098014
    #> 40      0.40  -0.146384480    0  0.0141093474 0.012345679
    #> 41      0.41  -0.165814725    0  0.0069052103 0.009236840
    #> 42      0.42  -0.185914979    0  0.0000000000 0.011129356
    #> 43      0.43  -0.206720505    0  0.0000000000 0.005198181
    #> 44      0.44  -0.228269085    0  0.0000000000 0.006424792
    #> 45      0.45  -0.250601251    0  0.0000000000 0.006253006
    #> 46      0.46  -0.273760533    0  0.0000000000 0.005291005
    #> 47      0.47  -0.297793751    0  0.0000000000 0.000000000
    #> 48      0.48  -0.322751323    0  0.0000000000 0.000000000
    #> 49      0.49  -0.348687623    0  0.0000000000 0.000000000
    #> 50      0.50  -0.375661376    0  0.0000000000 0.000000000
    #> 51      0.51  -0.403736098    0  0.0000000000 0.000000000
    #> 52      0.52  -0.432980600    0  0.0000000000 0.000000000
    #> 53      0.53  -0.463469549    0  0.0000000000 0.000000000
    #> 54      0.54  -0.495284104    0  0.0000000000 0.000000000
    #> 55      0.55  -0.528512640    0  0.0000000000 0.000000000
    #> 56      0.56  -0.563251563    0  0.0000000000 0.000000000
    #> 57      0.57  -0.599606251    0  0.0000000000 0.000000000
    #> 58      0.58  -0.637692114    0  0.0000000000 0.000000000
    #> 59      0.59  -0.677635824    0  0.0000000000 0.000000000
    #> 60      0.60  -0.719576720    0  0.0000000000 0.000000000
    #> 61      0.61  -0.763668430    0  0.0000000000 0.000000000
    #> 62      0.62  -0.810080757    0  0.0000000000 0.000000000
    #> 63      0.63  -0.859001859    0  0.0000000000 0.000000000
    #> 64      0.64  -0.910640800    0  0.0000000000 0.000000000
    #> 65      0.65  -0.965230537    0  0.0000000000 0.000000000
    #> 66      0.66  -1.023031435    0  0.0000000000 0.000000000
    #> 67      0.67  -1.084335418    0  0.0000000000 0.000000000
    #> 68      0.68  -1.149470899    0  0.0000000000 0.000000000
    #> 69      0.69  -1.218808670    0  0.0000000000 0.000000000
    #> 70      0.70  -1.292768959    0  0.0000000000 0.000000000
    #> 71      0.71  -1.371829958    0  0.0000000000 0.000000000
    #> 72      0.72  -1.456538171    0  0.0000000000 0.000000000
    #> 73      0.73  -1.547521066    0  0.0000000000 0.000000000
    #> 74      0.74  -1.645502646    0  0.0000000000 0.000000000
    #> 75      0.75  -1.751322751    0  0.0000000000 0.000000000
    #> 76      0.76  -1.865961199    0  0.0000000000 0.000000000
    #> 77      0.77  -1.990568208    0  0.0000000000 0.000000000
    #> 78      0.78  -2.126503127    0  0.0000000000 0.000000000
    #> 79      0.79  -2.275384228    0  0.0000000000 0.000000000
    #> 80      0.80  -2.439153439    0  0.0000000000 0.000000000
    #> 81      0.81  -2.620161515    0  0.0000000000 0.000000000
    #> 82      0.82  -2.821281599    0  0.0000000000 0.000000000
    #> 83      0.83  -3.046062870    0  0.0000000000 0.000000000
    #> 84      0.84  -3.298941799    0  0.0000000000 0.000000000
    #> 85      0.85  -3.585537919    0  0.0000000000 0.000000000
    #> 86      0.86  -3.913076342    0  0.0000000000 0.000000000
    #> 87      0.87  -4.291005291    0  0.0000000000 0.000000000
    #> 88      0.88  -4.731922399    0  0.0000000000 0.000000000
    #> 89      0.89  -5.253006253    0  0.0000000000 0.000000000
    #> 90      0.90  -5.878306878    0  0.0000000000 0.000000000
    #> 91      0.91  -6.642563198    0  0.0000000000 0.000000000
    #> 92      0.92  -7.597883598    0  0.0000000000 0.000000000
    #> 93      0.93  -8.826152683    0  0.0000000000 0.000000000
    #> 94      0.94 -10.463844797    0  0.0000000000 0.000000000
    #> 95      0.95 -12.756613757    0  0.0000000000 0.000000000
    #> 96      0.96 -16.195767196    0  0.0000000000 0.000000000
    #> 97      0.97 -21.927689594    0  0.0000000000 0.000000000
    #> 98      0.98 -33.391534392    0  0.0000000000 0.000000000
    #> 99      0.99 -67.783068783    0  0.0000000000 0.000000000
    #> 
    #> $interventions.avoided
    #>    threshold          age        lwt
    #> 1       0.01 0.000000e+00  0.0000000
    #> 2       0.02 0.000000e+00  0.0000000
    #> 3       0.03 0.000000e+00  0.0000000
    #> 4       0.04 0.000000e+00  0.0000000
    #> 5       0.05 0.000000e+00  0.0000000
    #> 6       0.06 0.000000e+00  0.0000000
    #> 7       0.07 0.000000e+00  0.0000000
    #> 8       0.08 0.000000e+00  0.5291005
    #> 9       0.09 2.806397e-14  1.0582011
    #> 10      0.10 0.000000e+00  2.1164021
    #> 11      0.11 2.245678e-14  2.1164021
    #> 12      0.12 4.070818e-14  2.6455026
    #> 13      0.13 5.291005e-01  2.6455026
    #> 14      0.14 5.291005e-01  3.1746032
    #> 15      0.15 5.291005e-01  0.1763668
    #> 16      0.16 5.291005e-01 -1.3227513
    #> 17      0.17 5.291005e-01 -4.5129163
    #> 18      0.18 5.291005e-01 -3.2921811
    #> 19      0.19 1.587302e+00 -2.1442495
    #> 20      0.20 2.645503e+00  0.5291005
    #> 21      0.21 6.550768e-01  3.1494079
    #> 22      0.22 2.356902e+00  1.7316017
    #> 23      0.23 3.335634e+00  4.3708305
    #> 24      0.24 3.968254e+00  3.0864198
    #> 25      0.25 7.407407e+00  2.6455026
    #> 26      0.26 8.506309e+00  2.9304029
    #> 27      0.27 6.701940e+00  0.8230453
    #> 28      0.28 4.006047e+00  3.7792895
    #> 29      0.29 4.853129e+00  6.4404306
    #> 30      0.30 2.998236e+00  9.7001764
    #> 31      0.31 2.423622e+00  5.8371736
    #> 32      0.32 2.314815e+00  7.4735450
    #> 33      0.33 7.439474e+00 10.7263107
    #> 34      0.34 7.469655e+00 15.2194211
    #> 35      0.35 6.500378e+00 17.6870748
    #> 36      0.36 1.240447e+01 21.9870664
    #> 37      0.37 1.670242e+01 23.0659231
    #> 38      0.38 1.854637e+01 26.1208577
    #> 39      0.39 1.986162e+01 24.6642247
    #> 40      0.40 2.407407e+01 23.8095238
    #> 41      0.41 2.485482e+01 25.1903471
    #> 42      0.42 2.567397e+01 27.2108844
    #> 43      0.43 2.740249e+01 28.0915467
    #> 44      0.44 2.905243e+01 29.8701299
    #> 45      0.45 3.062904e+01 31.3932981
    #> 46      0.46 3.213711e+01 32.7582241
    #> 47      0.47 3.358100e+01 33.5809974
    #> 48      0.48 3.496473e+01 34.9647266
    #> 49      0.49 3.629198e+01 36.2919771
    #> 50      0.50 3.756614e+01 37.5661376
    #> 51      0.51 3.879033e+01 38.7903309
    #> 52      0.52 3.996744e+01 39.9674400
    #> 53      0.53 4.110013e+01 41.1001298
    #> 54      0.54 4.219087e+01 42.1908681
    #> 55      0.55 4.324194e+01 43.2419432
    #> 56      0.56 4.425548e+01 44.2554800
    #> 57      0.57 4.523345e+01 45.2334540
    #> 58      0.58 4.617770e+01 46.1777048
    #> 59      0.59 4.708995e+01 47.0899471
    #> 60      0.60 4.797178e+01 47.9717813
    #> 61      0.61 4.882470e+01 48.8247029
    #> 62      0.62 4.965011e+01 49.6501109
    #> 63      0.63 5.044932e+01 50.4493155
    #> 64      0.64 5.122354e+01 51.2235450
    #> 65      0.65 5.197395e+01 51.9739520
    #> 66      0.66 5.270162e+01 52.7016194
    #> 67      0.67 5.340757e+01 53.4075653
    #> 68      0.68 5.409275e+01 54.0927482
    #> 69      0.69 5.475807e+01 54.7580707
    #> 70      0.70 5.540438e+01 55.4043840
    #> 71      0.71 5.603249e+01 56.0324912
    #> 72      0.72 5.664315e+01 56.6431511
    #> 73      0.73 5.723708e+01 57.2370805
    #> 74      0.74 5.781496e+01 57.8149578
    #> 75      0.75 5.837743e+01 58.3774250
    #> 76      0.76 5.892509e+01 58.9250905
    #> 77      0.77 5.945853e+01 59.4585309
    #> 78      0.78 5.997829e+01 59.9782933
    #> 79      0.79 6.048490e+01 60.4848972
    #> 80      0.80 6.097884e+01 60.9788360
    #> 81      0.81 6.146058e+01 61.4605787
    #> 82      0.82 6.193057e+01 61.9305717
    #> 83      0.83 6.238924e+01 62.3892395
    #> 84      0.84 6.283699e+01 62.8369866
    #> 85      0.85 6.327420e+01 63.2741986
    #> 86      0.86 6.370124e+01 63.7012428
    #> 87      0.87 6.411847e+01 64.1184699
    #> 88      0.88 6.452621e+01 64.5262145
    #> 89      0.89 6.492480e+01 64.9247964
    #> 90      0.90 6.531452e+01 65.3145209
    #> 91      0.91 6.569568e+01 65.6956800
    #> 92      0.92 6.606855e+01 66.0685530
    #> 93      0.93 6.643341e+01 66.4334073
    #> 94      0.94 6.679050e+01 66.7904987
    #> 95      0.95 6.714007e+01 67.1400724
    #> 96      0.96 6.748236e+01 67.4823633
    #> 97      0.97 6.781760e+01 67.8175967
    #> 98      0.98 6.814599e+01 68.1459886
    #> 99      0.99 6.846775e+01 68.4677462
